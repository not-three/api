<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>GetIpConfig | @not3/api</title><meta name="description" content="Documentation for @not3/api"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@not3/api</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">@not3/api</a></li><li><a href="GetIpConfig.html">GetIpConfig</a></li></ul><h1>Class GetIpConfig</h1></div><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="GetIpConfig.html#behindproxy" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>behind<wbr/>Proxy</span></a>
<a href="GetIpConfig.html#ipheader" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>ip<wbr/>Header</span></a>
<a href="GetIpConfig.html#proxyheader" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>proxy<wbr/>Header</span></a>
<a href="GetIpConfig.html#stripipv6address" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>strip<wbr/>Ipv6<wbr/>Address</span></a>
<a href="GetIpConfig.html#trustedproxies" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies</span></a>
<a href="GetIpConfig.html#trustedproxiescache" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies<wbr/>Cache</span></a>
<a href="GetIpConfig.html#trustedproxiesurls" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies<wbr/>Urls</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Properties</h2></summary><section><section class="tsd-panel tsd-member"><a id="behindproxy" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>behind<wbr/>Proxy</span><a href="#behindproxy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">behindProxy</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>If the api is running behind a proxy, set this to true.
This will make the app trust the X-Forwarded-For header.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default" class="tsd-anchor"></a>Default<a href="#default" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-0">false</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env" class="tsd-anchor"></a>Env<a href="#env" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>BEHIND_PROXY</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="ipheader" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>ip<wbr/>Header</span><a href="#ipheader" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">ipHeader</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Tell the api to use a custom header for the IP address. Only used if <code>behindProxy</code> is true.
If you for example are behind a Cloudflare proxy, you can set this to <code>CF-Connecting-IP</code>.
Remember that this header can be spoofed, so its recommended to tell your proxy
or firewall to only allow (for example) Cloudflare IP addresses.
If this is not possible, you can use the <code>trustedProxies</code> and <code>trustedProxiesUrls</code> options.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-1" class="tsd-anchor"></a>Default<a href="#default-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">&#39;X-Forwarded-For&#39;</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-1" class="tsd-anchor"></a>Env<a href="#env-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>IP_HEADER</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="proxyheader" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>proxy<wbr/>Header</span><a href="#proxyheader" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">proxyHeader</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Get the proxy IP address from an arbitrary header.
Useful if you have setups like <code>User -&gt; Cloudflare -&gt; Proxy -&gt; Server</code>.
If left empty, the request IP will be used.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link"><a id="example" class="tsd-anchor"></a>Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">`X-Forwarded-For`</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-2" class="tsd-anchor"></a>Default<a href="#default-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">&#39;&#39;</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-2" class="tsd-anchor"></a>Env<a href="#env-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>PROXY_IP_HEADER</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="stripipv6address" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>strip<wbr/>Ipv6<wbr/>Address</span><a href="#stripipv6address" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">stripIpv6Address</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>IPv6 address length to be stripped from the end in bytes.
This has implications on logging and rate limiting.
As many providers do handout IPv6 addresses with a /64 prefix,
we recommend setting this to 8, which will remove the last 16 characters.</p>
<p>Example: <code>abcd:abcd:abcd:abcd:abcd:abcd:abcd:abcd</code> -&gt; <code>abcd:abcd:abcd:abcd:0000:0000:0000:0000</code></p>
<p>If you set this to 0, the full IPv6 address will be logged, and rate limited.
Can not be higher than 16. (Which would strip the whole address, why would you do that?)</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-3" class="tsd-anchor"></a>Default<a href="#default-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-1">8</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-3" class="tsd-anchor"></a>Env<a href="#env-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>STRIP_IPV6_ADDRESS</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="trustedproxies" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>trusted<wbr/>Proxies</span><a href="#trustedproxies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">trustedProxies</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Trust only the IP header if the request originates from one of the following ip addresses.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link"><a id="example-1" class="tsd-anchor"></a>Example<a href="#example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">`192.168.178.1/24,fdf7:7d5b:4f3b:5e3c::/64,10.10.10.1`</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-4" class="tsd-anchor"></a>Default<a href="#default-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">&#39;0.0.0.0/0,::/0&#39;</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-4" class="tsd-anchor"></a>Env<a href="#env-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>TRUSTED_PROXIES</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="trustedproxiescache" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>trusted<wbr/>Proxies<wbr/>Cache</span><a href="#trustedproxiescache" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">trustedProxiesCache</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Cache downloaded proxy IP addresses for this amount of seconds.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-5" class="tsd-anchor"></a>Default<a href="#default-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-1">3600</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-5" class="tsd-anchor"></a>Env<a href="#env-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>TRUSTED_PROXIES_CACHE</p>
</div></div></section><section class="tsd-panel tsd-member"><a id="trustedproxiesurls" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>trusted<wbr/>Proxies<wbr/>Urls</span><a href="#trustedproxiesurls" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">trustedProxiesUrls</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Trust only the IP header if the request originates from one of the following urls.
The urls should return a list of ip addresses separated by a newline.
If set the <code>trustedProxies</code> option will be ignored.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link"><a id="example-2" class="tsd-anchor"></a>Example<a href="#example-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">&#39;https://www.cloudflare.com/ips-v6,https://www.cloudflare.com/ips-v4&#39;</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-default"><h4 class="tsd-anchor-link"><a id="default-6" class="tsd-anchor"></a>Default<a href="#default-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-2">&#39;&#39;</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-env"><h4 class="tsd-anchor-link"><a id="env-6" class="tsd-anchor"></a>Env<a href="#env-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>TRUSTED_PROXIES_URLS</p>
</div></div></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#behindproxy" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>behind<wbr/>Proxy</span></a><a href="#ipheader" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>ip<wbr/>Header</span></a><a href="#proxyheader" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>proxy<wbr/>Header</span></a><a href="#stripipv6address" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>strip<wbr/>Ipv6<wbr/>Address</span></a><a href="#trustedproxies" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies</span></a><a href="#trustedproxiescache" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies<wbr/>Cache</span></a><a href="#trustedproxiesurls" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>trusted<wbr/>Proxies<wbr/>Urls</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html">@not3/api</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
